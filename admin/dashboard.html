<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin Dashboard - Photoshot</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
    />
    <style>
      .sidebar {
        min-height: 100vh;
        background: #111;
        color: white;
        padding: 2rem 0;
      }
      .sidebar a {
        color: white;
        text-decoration: none;
        padding: 1rem 2rem;
        display: block;
        transition: background 0.3s;
      }
      .sidebar a:hover,
      .sidebar a.active {
        background: #333;
        color: #fdb445;
      }
      .content-area {
        padding: 2rem;
      }
      .section {
        display: none;
      }
      .section.active {
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-2 sidebar">
          <h4 class="px-3 mb-4">Photoshot Admin</h4>
          <a
            href="../index.html"
            class="nav-link"
            style="
              background: #fdb445;
              color: #111;
              font-weight: bold;
              margin-bottom: 1rem;
            "
          >
            <i class="bi bi-house"></i> Back to Website
          </a>
          <a href="#" class="nav-link active" data-section="services">
            <i class="bi bi-briefcase"></i> Services
          </a>
          <a href="#" class="nav-link" data-section="gallery">
            <i class="bi bi-images"></i> Gallery
          </a>
          <a href="#" class="nav-link" data-section="contacts">
            <i class="bi bi-envelope"></i> Contacts
          </a>
          <a href="#" class="nav-link" onclick="handleLogout()">
            <i class="bi bi-box-arrow-right"></i> Logout
          </a>
        </div>
        <div class="col-md-10 content-area">
          <!-- Services Section -->
          <div id="services" class="section active">
            <h2>Services Management</h2>
            <button class="btn btn-primary mb-3" onclick="showServiceModal()">
              <i class="bi bi-plus"></i> Add Service
            </button>
            <div id="servicesList" class="row">
              <!-- Services will be loaded here -->
            </div>
          </div>

          <!-- Gallery Section -->
          <div id="gallery" class="section">
            <h2>Gallery Management</h2>
            <button
              class="btn btn-primary mb-3"
              onclick="showImageUploadModal()"
            >
              <i class="bi bi-upload"></i> Upload Image
            </button>
            <div id="galleryList" class="row">
              <!-- Gallery images will be loaded here -->
            </div>
          </div>

          <!-- Contacts Section -->
          <div id="contacts" class="section">
            <h2>Contact Messages</h2>
            <div id="contactsList">
              <!-- Contacts will be loaded here -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Service Modal -->
    <div class="modal fade" id="serviceModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="serviceModalTitle">Add Service</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form id="serviceForm">
              <input type="hidden" id="serviceId" />
              <div class="mb-3">
                <label for="serviceTitle" class="form-label">Title</label>
                <input
                  type="text"
                  class="form-control"
                  id="serviceTitle"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="serviceDescription" class="form-label"
                  >Description</label
                >
                <textarea
                  class="form-control"
                  id="serviceDescription"
                  rows="3"
                  required
                ></textarea>
              </div>
              <div class="mb-3">
                <label for="servicePrice" class="form-label">Price</label>
                <input
                  type="text"
                  class="form-control"
                  id="servicePrice"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="serviceImageUrl" class="form-label"
                  >Image URL</label
                >
                <input
                  type="url"
                  class="form-control"
                  id="serviceImageUrl"
                  required
                />
              </div>
              <div id="serviceFormMessage"></div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancel
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="saveService()"
            >
              Save
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Image Upload Modal -->
    <div class="modal fade" id="imageUploadModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Upload Image</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form id="imageUploadForm">
              <div class="mb-3">
                <label for="imageFile" class="form-label">Select Image</label>
                <input
                  type="file"
                  class="form-control"
                  id="imageFile"
                  accept="image/*"
                  required
                />
              </div>
              <div id="imageUploadMessage"></div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancel
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="uploadImage()"
            >
              Upload
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../js/config.js"></script>
    <script src="../js/supabase.js"></script>
    <script src="admin-dashboard.js"></script>
  </body>
</html>
